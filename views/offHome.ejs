<%- include('partials/head'); -%>
<%- include('partials/offNav'); -%>
<div class='container signreg text-center'>
	<form class="form-signin myform" action="/login" method="POST" style="border:1px solid black">
		<h1 class="h3 mb-5 mt-3 font-weight-normal">Please sign in</h1>
		<label for="username" class="sr-only">UserName</label>
		<input type="text" name='username' id="logUsername" class="form-control" placeholder="UserName" required
			autofocus>
		<label for="password" class="sr-only">Password</label>
		<input type="password" name='password' id="logInputPassword" class="form-control" placeholder="Password"
			required>
		<!-- <div class="checkbox mb-3">
			<label>
				<input type="checkbox" value="remember-me"> Remember me
			</label>
		</div> -->
		<button class="btn mt-4 btn-lg btn-primary btn-block" type="submit">Sign in</button>
		<p class="mt-4 mb-3 text-muted">New User? <a class='switchsigres' href='#Register'>Register Here</a></p>
	</form>
	<form class="form-register myform" id='regform' name="regform" style="border:1px solid black; display: none;"
		action="/register" method="POST" novalidate>
		<h1 class="h3 mb-5 mt-3 font-weight-normal">Enter the details</h1>
		<div class="form-groupp">
			<label for="username" class="sr-only">UserName</label>
			<input type="text" name="username" id="regUsername" class="form-control" placeholder="UserName" required
				autofocus>
		</div>
		<div class="form-groupp">
			<label for="email" class="sr-only">Email ID</label>
			<input type="email" name="email" id="regEmail" class="form-control" placeholder="Email" required>
		</div>
		<div class="form-groupp">
			<label for="inputPassword" class="sr-only">Password</label>
			<input type="password" name="inputPassword" id="regInputPassword" class="form-control"
				placeholder="Password" required>
		</div>
		<!-- <div class="checkbox mb-3">
				<label>
					<input type="checkbox" value="remember-me"> Remember me
				</label>
			</div> -->
		<button class="btn mt-4 btn-lg btn-primary btn-block" type="submit">Register</button>
		<p class="mt-4 mb-3 text-muted">Already a User? <a class='switchsigres' href='#login'>Sign in Here</a></p>
		<div class="form-group">
			<div class="col-md-9 col-md-offset-3">
				<div id="messages"></div>
			</div>
		</div>
	</form>
</div>
<script>
	document.getElementById("home").classList.add("active");
	document.getElementById("regform").addEventListener('submit', async function (e) {
		e.preventDefault();
		// console.log(e);
		const formElem = new FormData(this);
		const searchParams = new URLSearchParams();
		for (const pair of formElem) {
			searchParams.append(pair[0], pair[1]);
		}
		// console.log(...formElem);
		let res = await fetch('/register', {
			method: 'post',
			body: searchParams
		})
		// console.log(formElem);
		res = await res.json();
		if (res === "Success")
			alert("Good");
		else
			alert(res);
	});
</script>
<%- include('partials/offFootSrc'); -%>
<%- include('partials/foot'); -%>